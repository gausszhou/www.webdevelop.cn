(window.webpackJsonp=window.webpackJsonp||[]).push([[198],{652:function(t,s,a){"use strict";a.r(s);var e=a(10),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"ffmpeg-常用命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ffmpeg-常用命令"}},[t._v("#")]),t._v(" FFmpeg 常用命令")]),t._v(" "),a("h2",{attrs:{id:"参考资料"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[t._v("#")]),t._v(" 参考资料")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://ostechnix.com/20-ffmpeg-commands-beginners/",target:"_blank",rel:"noopener noreferrer"}},[t._v("给新手的20+个FFmpeg命令"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://ostechnix.com/create-animated-gif-ubuntu-16-04/",target:"_blank",rel:"noopener noreferrer"}},[t._v("如何在Linux中创建动画GIF"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://ostechnix.com/create-video-pdf-files-linux/",target:"_blank",rel:"noopener noreferrer"}},[t._v("如何从Linux中从PDF2文件创建视频"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://www.ruanyifeng.com/blog/2020/01/ffmpeg.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("FFmpeg 视频处理入门教程"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://gist.github.com/steven2358/ba153c642fe2bb1e47485962df07c730",target:"_blank",rel:"noopener noreferrer"}},[t._v("FFmpeg cheat sheet"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"ffmpeg-是什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ffmpeg-是什么"}},[t._v("#")]),t._v(" FFmpeg 是什么？")]),t._v(" "),a("p",[t._v("FFmpeg是领先的多媒体框架，它能够解码、编码、转码、mux、demux、流、过滤和播放几乎所有人类和机器创造的东西。它支持最古老的到目前最流行最时尚的多媒体文件格式，不管它们是由标准委员会、社区还是公司设计的。")]),t._v(" "),a("h2",{attrs:{id:"安装ffmpeg"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装ffmpeg"}},[t._v("#")]),t._v(" 安装FFmpeg")]),t._v(" "),a("h3",{attrs:{id:"windows"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#windows"}},[t._v("#")]),t._v(" Windows")]),t._v(" "),a("p",[t._v("官网下载安装，下载build包，安装后配置环境变量即可")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 举例")]),t._v("\nFFMPEG_PATH:D:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Software"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("FFmpeg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("bin\nPath:D:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Software"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("FFmpeg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("bin\n")])])]),a("h3",{attrs:{id:"linux"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#linux"}},[t._v("#")]),t._v(" Linux")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加软件源")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" https://download1.rpmfusion.org/free/el/rpmfusion-free-release-7.noarch.rpm "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" https://download1.rpmfusion.org/nonfree/el/rpmfusion-nonfree-release-7.noarch.rpm "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rpm")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rpm")]),t._v(" -ivh *.rpm\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rpm")]),t._v(" --import http://li.nux.ro/download/nux/RPM-GPG-KEY-nux.ro "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rpm")]),t._v(" -Uvh http://li.nux.ro/download/nux/dextop/el7/x86_64/nux-dextop-release-0-1.el7.nux.noarch.rpm "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 或者使用更新")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt")]),t._v(" update  \n")])])]),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ubuntu  ")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" ffmpeg\n")])])]),a("h2",{attrs:{id:"使用ffmpeg"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用ffmpeg"}},[t._v("#")]),t._v(" 使用FFmpeg")]),t._v(" "),a("h3",{attrs:{id:"在线文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在线文档"}},[t._v("#")]),t._v(" 在线文档")]),t._v(" "),a("p",[a("a",{attrs:{href:"http://itiit.cn/html/ffmpeg.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("中文文档"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"基本语法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基本语法"}},[t._v("#")]),t._v(" 基本语法")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("ffmpeg "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" 全局选项"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" 输入文件选项"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" -i 输入地址"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" 输出文件选项"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" 输出地址"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n")])])]),a("h3",{attrs:{id:"打印帮助"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#打印帮助"}},[t._v("#")]),t._v(" 打印帮助")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("-L                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# show license ")]),t._v("\n-h  -? -help --help   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# show help ")]),t._v("\n-version          "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# show version")]),t._v("\n-buildconf        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# show build configuration")]),t._v("\n-formats          "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# show supported formats")]),t._v("\n-muxers           "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 显示可用的音视频复用器(混合音视频)")]),t._v("\n-demuxers         "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 显示可用的音视频分离器(分离音视频)")]),t._v("\n-devices          "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 显示可用的设备")]),t._v("\n-codecs           "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 显示可用的编解码器")]),t._v("\n-decoders          \n-encoders\n-bsfs             "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 显示可用的比特流筛选器")]),t._v("\n-protocols        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 显示可用的协议")]),t._v("\n-filters          "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 显示可用的libavfilter过滤器")]),t._v("\n-pix_fmts         "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 显示可用的像素格式")]),t._v("\n-layouts          "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 显示频道名称和标准频道布局")]),t._v("\n-sample_fmts      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 显示可用的样本格式")]),t._v("\n-colors           "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 显示公认的颜色名称")]),t._v("\n-sources device   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 显示输入设备的自动检测源")]),t._v("\n-sinks device     "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 显示输出设备的自动检测接收器")]),t._v("\n-hwaccels         "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 显示可用的硬件加速方法")]),t._v("\n")])])]),a("h3",{attrs:{id:"全局选项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#全局选项"}},[t._v("#")]),t._v(" 全局选项")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("-loglevel loglevel\n-v loglevel       "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# set logging level")]),t._v("\n-report\n-y                "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 覆盖输出文件，不要询问")]),t._v("\n-n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 不要覆盖输出文件")]),t._v("\n")])])]),a("h3",{attrs:{id:"主要选项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#主要选项"}},[t._v("#")]),t._v(" 主要选项")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("-f "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fmt")]),t._v("       "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 强制输入或输出的格式，不要经常使用")]),t._v("\n-i url       "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 输入文件的地址")]),t._v("\n-codec:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("v"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" libx264 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("input/output"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 选择一个编码器")]),t._v("\n-c:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("v"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" libx264 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("input/output"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 缩写")]),t._v("\n-t duration       "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 限制输入时的读取时间，限制输出时的写入时间 ")]),t._v("\n                  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# [-][HH:]MM:SS[.m...] or [-]S+[.m...][s|ms|us]")]),t._v("\n-to position      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 停止写入输出或读取position处的输入，参考duration")]),t._v("\n-fs limit_size    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置文件大小限制，单位字节，byte")]),t._v("\n-ss position      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置起始位置(时间)")]),t._v("\n-qscale:v         "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 控制视频质量 0 保持视频质量")]),t._v("\n-vframes number   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置要输出视频帧数 应该使用-frames:v")]),t._v("\n-r:v rate         "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置帧率")]),t._v("\n-s size           "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置帧的大小")]),t._v("\n-vcodec codec     "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置视频编解码器 这是 -codec:v的别名")]),t._v("\n-preset           "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 指定输出的视频质量，会影响文件的生成速度")]),t._v("\n\n")])])]),a("h3",{attrs:{id:"常用命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用命令"}},[t._v("#")]),t._v(" 常用命令")]),t._v(" "),a("ol",[a("li",[t._v("获取基本信息")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("ffmpeg -i input.mp4\n\nffmpeg -i input.mp4 -hide_banner\n")])])]),a("blockquote",[a("p",[t._v("打印信息如下")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("Input "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#0, mov,mp4,m4a,3gp,3g2,mj2, from '.\\video.mp4':")]),t._v("\n  Metadata:\n    major_brand     "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" isom\n    minor_version   "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512")]),t._v("\n    compatible_brands: isomiso2avc1mp41\n    encoder         "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Lavf58.20.100\n  Duration: 00:03:06.92, start: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.000000")]),t._v(", bitrate: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2162")]),t._v(" kb/s\n    Stream "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#0:0(und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(tv, bt709), 1920x1080 [SAR 1:1 DAR 16:9], 2026 kb/s, 29.97 fps, 29.97 tbr, 30k tbn, 59.94 tbc (default)")]),t._v("\n    Metadata:\n      handler_name    "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" ISO Media "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" produced by Google Inc. Created on: 04/29/2019.\n    Stream "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#0:1(und): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 127 kb/s (default)")]),t._v("\n    Metadata:\n      handler_name    "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" ISO Media "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" produced by Google Inc. Created on: 04/29/2019.\nAt least one output "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" must be specified\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[t._v("格式转换")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("ffmpeg -i input.mp3 output.ogg\nffmpeg -i input.mp4 output.avi\nffmpeg -i input.flv output.mpeg\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 维持视频质量进行转换 -qscale 0")]),t._v("\nffmpeg -i input.webm -qscale "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" output.mp4\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 列出支持的格式")]),t._v("\nffmpeg -formats\n")])])]),a("p",[a("img",{attrs:{src:"https://www.gausszhou.top/source/data/image/learn/ffmpeg/mp4vsavi.png",alt:"mp4vsavi"}})]),t._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[t._v("提取音频")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -vn video no ")]),t._v("\nffmpeg -i input.mp4 -vn output.mp3\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -ar audiorate 指定采样率")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -ac audiochannel 2 指定双声道")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -ab audiobit 指定音频比特率")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -f 输出文件格式")]),t._v("\nffmpeg -i input.mp4 -vn -ar "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("44100")]),t._v(" -ac "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" -ab "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("320")]),t._v(" -f mp3 output.mp3\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Output #0, mp3, to 'audio.mp3':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    TSSE            : Lavf58.45.100\n    Stream #0:0(und): Audio: mp3 (libmp3lame), 44100 Hz, stereo, fltp (default)\n")])])]),a("p",[a("img",{attrs:{src:"https://www.gausszhou.top/source/data/image/learn/ffmpeg/audiomp3.png",alt:"audio"}})]),t._v(" "),a("ol",{attrs:{start:"4"}},[a("li",[t._v("修改分辨率")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -c:a copy 音频不做处理")]),t._v("\nffmpeg -i input.mp4 -filter:v "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("scale")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1280")]),t._v(":720 -c:a copy output.mp4\nffmpeg -i input.mp4 -s 1280x720 -c:a copy output_1280x720.mp4\n")])])]),a("ol",{attrs:{start:"5"}},[a("li",[t._v("压缩视频文件")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -crf 0 为无损 51最差 一般建议 18~28")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -preset 指定的编码速度越慢，获得的压缩效率就越高")]),t._v("\nffmpeg -i input.mp4 -vf "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("scale")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1280")]),t._v(":-1 -c:v libx264 -preset veryslow -crf "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v(" output_crf18.mp4\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 上面没有处理音频，使用下面的选项可以压缩音频 ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -ac 2 -c:a aac -strict -2 -b:a 128k")]),t._v("\n")])])]),a("ol",{attrs:{start:"6"}},[a("li",[t._v("压缩音频文件")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -ar 控制采样率")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -ab audiobit 控制音频比特率  96k 112k 128k 160k  单位kbps")]),t._v("\nffmpeg -i input.mp3 -ab 96k output_96k.mp3\n")])])]),a("ol",{attrs:{start:"7"}},[a("li",[t._v("去除音频")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -an audio no")]),t._v("\nffmpeg -i input.mp4 -an output_noaudio.mp4\n")])])]),a("ol",{attrs:{start:"8"}},[a("li",[t._v("去除视频 (视频转音频)")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("ffmpeg -i input.mp4 -vn output.mp4\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -ab 320 指定 audiobit 为320kpbs")]),t._v("\nffmpeg -i input.mp4 -vn -ab 320k output_320k.mp3\n")])])]),a("ol",{attrs:{start:"9"}},[a("li",[t._v("提取图像")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" images\nffmpeg -i input.mp4 -r "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" -f image2 ./images/image-%3d.png\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -r 1 每秒提取1帧 默认值为25")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -f iamge2  输出格式 image2 图片")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# image-%3d.png  命名 image-001.png")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 反过来 图片序列转视频")]),t._v("\nffmpeg -r "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/10 -i ./images/image-%3d.png -c:v libx264 -r "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v(" -pix_fmt yuv420p video.mp4\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -r 1/10 每张图像图像显示10s")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -i ./images/image-%3d.png 读取image-开头带3为数字以png结尾的图片")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -c:v libx264 指定视频编解码器为h264")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -r 30 输出帧率")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -pix_fmt yuv420p 输出视频分辨率")]),t._v("\n")])])]),a("ol",{attrs:{start:"10"}},[a("li",[t._v("裁剪图像")])]),t._v(" "),a("blockquote",[a("p",[t._v("请注意，剪切视频将影响质量。除非必要，请勿剪切")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 语法")]),t._v("\nffmpeg -i input.mp4 -filter:v "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"crop=2:h:x:y"')]),t._v(" output.mp4\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# crop 裁切 w  h x  y 矩形的宽度 高度  x坐标 y 坐标")]),t._v("\nffmpeg -i input.mp4 -filter:v "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"crop=640:360:160:90"')]),t._v(" output_crop.mp4\n\n")])])]),a("p",[a("img",{attrs:{src:"https://www.gausszhou.top/source/data/image/learn/ffmpeg/crop.png",alt:"crop"}})]),t._v(" "),a("ol",{attrs:{start:"11"}},[a("li",[t._v("剪切视频")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -ss 指定开始时间 默认为0")]),t._v("\nffmpeg -i input.mp4 -ss "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v(" output_cut_30s_to_end.mp4\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -t  指定持续时间 单位为秒 也可以使用hh:mm:ss格式指定")]),t._v("\nffmpeg -i input.mp4 -t "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v(" output_cut_start_to_30s.mp4\nffmpeg -i input.mp4 -t 00:00:30 output_cut_start_to_30s.mp4\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 搭配使用 剪切 00:00:30 到 00:01:30")]),t._v("\nffmpeg -i input.mp4 -ss 00:00:30 -t 00:01:00 output_cut_30s_to_90s.mp4\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 搭配使用 剪切成多个部分 00:00:00-00:01:00 part.mp4 00:01:00-end part2.mp4")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" videos\nffmpeg -i input.mp4 -t 00:01:00  ./videos/part1.mp4 -ss 00:01:00 ./videos/part2.mp4\n\n")])])]),a("ol",{attrs:{start:"12"}},[a("li",[t._v("剪切音频")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 同理 00:00:30-00:01:30s ")]),t._v("\nffmpeg -i input.mp3 -ss 00:00:30 -t 00:01:00  output_cut_30s_to_90s.mp3\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 同理 00:00:00-00:01:00 part.mp3 00:01:00-end part2.mp3")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" audios\nffmpeg -i input.mp3 -t 00:01:00  ./audios/part1.mp3 -ss 00:01:00  ./audios/part2.mp3\n")])])]),a("ol",{attrs:{start:"13"}},[a("li",[t._v("设置视频宽高比")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# aspect 16:9 4:3 16:10 ")]),t._v("\nffmpeg -i input.mp4 -aspect "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(":3 output_aspect_4:3.mp4\n")])])]),a("ol",{attrs:{start:"14"}},[a("li",[t._v("添加封面到音频")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 提取音频")]),t._v("\nffmpeg -i input.mp4 -vn input.mp3\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 提取图像")]),t._v("\nffmpeg -i input.mp4 -r "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" -f image2 ./images/image-%3d.png\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 复制图像")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v("  ./images/image-001.png  ./input.png  -rf\n")])])]),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("ffmpeg -loop "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" -i input.png -i input.mp3  output_one_image.mp4\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -loop 1 表示图片无限循环 ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# shortest 表示音频结束，输出视频就结束")]),t._v("\n")])])]),a("ol",{attrs:{start:"15"}},[a("li",[t._v("合并视频")])]),t._v(" "),a("blockquote",[a("p",[t._v("join.txt")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" ./videos/part1.mp4\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" ./videos/part2.mp4\n")])])]),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("ffmpeg -f  concat  -i join.txt -c copy ./videos/merge.mp4\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 如果提示  join.txt: Operation not permitted 添加 -safe 0 ")]),t._v("\nffmpeg -f  concat -safe "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("  -i join.txt -c copy ./videos/merge.mp4\n")])])]),a("ol",{attrs:{start:"16"}},[a("li",[t._v("调整速度")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 两倍速")]),t._v("\nffmpeg -i input.mp4 -vf "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"setpts=0.5*PTS"')]),t._v(" output_0.5pts.mp4\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 0.25倍速")]),t._v("\nffmpeg -i input.mp4 -vf "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"setpts=4.0*PTS"')]),t._v(" output_4.0pts.mp4\n")])])]),a("ol",{attrs:{start:"17"}},[a("li",[t._v("推流")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 本地文件转RTMP")]),t._v("\nffmpeg -re -i input.mp4 -c copy -f flv  rtmp://localhost:1935/live/filetortmp\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 本地文件切片为hls m3u8")]),t._v("\n\nffmpeg -i input.mp4 -c copy -f segment -segment_list ./hls/live.m3u8 -segment_time "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("  ./hls/live%03d.ts\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 本地文件转HLS")]),t._v("\nffmpeg  -re -i input.mp4 -c:v h264 -flags +cgop -g "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v(" -hls_time "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" -hls_flags delete_segments ./hls/live.m3u8\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# RTSP转RTMP")]),t._v("\nffmpeg -i rtsp://192.168.0.10:554 -f flv rtmp://127.0.0.1:1935/live/rtsptortmps\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# RTSP转HLS")]),t._v("\nffmpeg -i rtsp://192.168.0.10:554 -c:v h264 -flags +cgop -g "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v(" -hls_time "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" -hls_flags delete_segments ./hls/live.m3u8\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -c:v h264 指定编解码器")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -flags +cgop ")]),t._v("\n")])])]),a("ol",{attrs:{start:"18"}},[a("li",[t._v("拉流")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("ffmpeg -i rtmp://rtmp.gausszhou.top/live \n")])])]),a("ol",{attrs:{start:"19"}},[a("li",[t._v("图片转换")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("ffmpeg -i input.png -pix_fmt yuv420p output.yuv\n")])])]),a("ol",{attrs:{start:"20"}},[a("li",[t._v("测试音视频")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("ffplay input.mp4\nffplay input.mp3\n")])])]),a("h3",{attrs:{id:"其他命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其他命令"}},[t._v("#")]),t._v(" 其他命令")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -threads 4  启用多线程")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -c:v h264_nvenc 使用N卡硬件加速")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);