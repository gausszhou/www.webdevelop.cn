(window.webpackJsonp=window.webpackJsonp||[]).push([[238],{688:function(e,s,n){"use strict";n.r(s);var t=n(10),a=Object(t.a)({},(function(){var e=this,s=e.$createElement,n=e._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h2",{attrs:{id:"open-ssl"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#open-ssl"}},[e._v("#")]),e._v(" Open SSL")]),e._v(" "),n("blockquote",[n("p",[e._v("使用Open SSL 生成私有SSL证书")])]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("[req]\ndefault_bits  = 2048\ndistinguished_name = req_distinguished_name\nreq_extensions = req_ext\nx509_extensions = v3_req\nprompt = no\n[req_distinguished_name]\ncountryName = CN\nstateOrProvinceName = HN\nlocalityName = CS\norganizationName = Self-Cert\ncommonName = Self-Cert\n[req_ext]\nsubjectAltName = @alt_names\n[v3_req]\nsubjectAltName = @alt_names\n[alt_names]\nIP.1 = 127.0.0.1\n")])])]),n("p",[e._v("首先，虚构一个CA认证机构出来")]),e._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 生成CA认证机构的证书密钥key ")]),e._v("\nopenssl genrsa -out ca.key "),n("span",{pre:!0,attrs:{class:"token number"}},[e._v("2048")]),e._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 用私钥ca.key生成CA认证机构的证书ca.crt")]),e._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 其实就是相当于用私钥生成公钥，再把公钥包装成证书")]),e._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[e._v('# 这个证书ca.crt有的又称为"根证书",因为可以用来认证其他证书')]),e._v("\nopenssl req -new -key ca.key -out ca.csr --config san.cnf\nopenssl x509 -req -in ca.csr -CAkey ca.key -signkey ca.key -out ca.crt -days "),n("span",{pre:!0,attrs:{class:"token number"}},[e._v("365")]),e._v("\n")])])]),n("p",[e._v("其次，才是生成网站的证书")]),e._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 生成自己网站的密钥server.key")]),e._v("\nopenssl genrsa -out server.key "),n("span",{pre:!0,attrs:{class:"token number"}},[e._v("2048")]),e._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 生成自己网站证书的请求文件")]),e._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 如果找外面的CA机构认证，也是发个请求文件给他们")]),e._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 这个私钥就包含在请求文件中了，认证机构要用它来生成网站的公钥，然后包装成一个证书")]),e._v("\nopenssl req -new -key server.key -out server.csr  --config san.cnf\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 使用虚拟的CA认证机构的证书ca.crt，来对自己网站的证书请求文件server.csr进行处理，生成签名后的证书server.crt")]),e._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 注意设置序列号和有效期（一般都设1年）")]),e._v("\nopenssl x509 -req -in server.csr -CA ca.crt -CAkey ca.key -signkey server.key -CAcreateserial  -out server.crt -days "),n("span",{pre:!0,attrs:{class:"token number"}},[e._v("365")]),e._v(" \n")])])])])}),[],!1,null,null,null);s.default=a.exports}}]);